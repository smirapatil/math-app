<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<title>Kids Math Pro</title>
<style>
body{margin:0;font-family:Arial;background:#eef7ff;height:100vh;display:flex;justify-content:center;align-items:center}
.app{background:#fff;border-radius:20px;padding:20px;width:95%;max-width:520px;text-align:center}
select,button,input{font-size:1.2em;padding:8px;margin:5px;border-radius:10px}
.question{font-size:2.4em;margin:20px 0;line-height:1.2}
.vertical{display:flex;flex-direction:column;align-items:flex-end;font-family:monospace}
.hint{color:#666;font-size:1em;margin:10px}
.score{font-size:1.2em;margin-top:10px}
.timer{font-size:1.2em;color:#e53935}
.stars{font-size:2em;color:gold}
.dashboard{font-size:0.9em;color:#444;margin-top:10px}
</style>
</head>
<body>
<div class="app">
  <h2>üßÆ Kids Math Pro</h2>

  <!-- Grade Selector -->
  <label>Grade:</label>
  <select id="grade" onchange="setGrade()">
    <option value="1">1st Grade</option>
    <option value="2">2nd Grade</option>
    <option value="3">3rd Grade</option>
  </select>

  <div class="timer" id="timer">‚è±Ô∏è 30</div>

  <!-- Vertical Question -->
  <div class="question vertical" id="question"></div>

  <div class="hint" id="hint"></div>

  <input type="number" id="answer" autofocus />
  <br />
  <button onclick="submitAnswer()">Submit</button>

  <div class="score" id="score"></div>
  <div class="stars" id="stars"></div>
  <div class="dashboard" id="dashboard"></div>
</div>

<audio id="correctSound" src="https://actions.google.com/sounds/v1/cartoon/clang_and_wobble.ogg"></audio>
<audio id="wrongSound" src="https://actions.google.com/sounds/v1/cartoon/wood_plank_flicks.ogg"></audio>

<script>
let grade=1,score=0,qCount=0,correct=0,time=30,timerInt;
const total=20;

function setGrade(){grade=document.getElementById('grade').value;newGame();}

function newGame(){score=0;qCount=0;startTimer();nextQ();}

function startTimer(){clearInterval(timerInt);time=30;
  timerInt=setInterval(()=>{time--;document.getElementById('timer').innerText='‚è±Ô∏è '+time;
  if(time<=0){clearInterval(timerInt);nextQ();}},1000);
}

function nextQ(){
  if(qCount>=total){endGame();return;}
  qCount++;startTimer();document.getElementById('answer').value='';
  let max=grade==1?20:grade==2?50:99;
  let a=Math.floor(Math.random()*max)+1;
  let b=Math.floor(Math.random()*max)+1;
  let op=['+','-'][Math.floor(Math.random()*2)];
  if(op==='-'){a=Math.max(a,b);b=Math.min(a,b);correct=a-b;
    document.getElementById('hint').innerText=(a%10<b%10)?'Borrow from tens ‚ûú':'';
  }else{correct=a+b;document.getElementById('hint').innerText=((a%10+b%10)>=10)?'Carry to tens ‚ûú':'';}
  document.getElementById('question').innerHTML=`<div>${a}</div><div>${op} ${b}</div><div>‚îÄ‚îÄ‚îÄ‚îÄ</div>`;
}

function submitAnswer(){let ans=Number(answer.value);
  if(ans===correct){score++;correctSound.play();}else{wrongSound.play();}
  document.getElementById('score').innerText=`Score: ${score}/${total}`;
  document.getElementById('stars').innerText='‚≠ê'.repeat(score);
  saveProgress();nextQ();}

function saveProgress(){
  let data=JSON.parse(localStorage.getItem('progress')||'{}');
  data.date=new Date().toLocaleDateString();
  data.score=score;localStorage.setItem('progress',JSON.stringify(data));
  document.getElementById('dashboard').innerText=`Parent View ‚Üí Last Score: ${data.score}`;
}

function endGame(){clearInterval(timerInt);
  question.innerText='üéâ Great Job!';hint.innerText='';}

document.documentElement.requestFullscreen?.();
newGame();
</script>
</body>
</html>
